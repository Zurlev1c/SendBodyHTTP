Функция GETзапрос()
	
	Выборка = Справочники.Тарифы.Выбрать();
	Пока Выборка.Следующий() цикл
		ОбъектСправочника = Выборка.ПолучитьОбъект();
		ОбъектСправочника.Удалить();
	КонецЦикла;
	
	Попытка
		Соединение = Новый HTTPСоединение("localhost");
	Исключение
		Возврат "Ошибка при создании HTTP соединения";
	КонецПопытки;
	                              //название публикуемой базы + название http сервиса
	HTTPЗапрос = Новый HTTPЗапрос("InfoBase107"+"/hs/Exchange/query");
	
	Ответ = "";
	Попытка 
		HTTPОтвет = Соединение.Записать(HTTPЗапрос);
		Ответ = HTTPОтвет.ПолучитьТелоКакСтроку();
	Исключение
		Возврат "Ошибка при соединении.";
	КонецПопытки;
	    Массив = Новый Массив;
		ЧтениеJSON = Новый ЧтениеJSON;
		ЧтениеJSON.УстановитьСтроку(Ответ);
		Массив = ПрочитатьJSON(ЧтениеJSON); 
		Для Каждого Элемента из Массив цикл
			Спр = Справочники.Тарифы.СоздатьЭлемент();
			Спр.Наименование = Элемента.Наименование;
			Проверка = Справочники.Тарифы.НайтиПоНаименованию(Спр.Наименование);
			Если Проверка.Пустая() тогда
				Спр.Записать();
			КонецЕсли;
			
		КонецЦикла;
КонецФункции 


&НаКлиенте
Процедура ПриОткрытии(Отказ)
	Результат = GETзапрос();
КонецПроцедуры
